<div class="block">
  <button class="button button-fill show-question-answers">Покажи отговорите на въпрос</button>
</div>


$('body').on('click', '.show-question-answers', function () {
  app.dialog.prompt('Въведете номера на въпроса:', function (qNumber) {
    if (!qNumber || isNaN(qNumber)) {
      app.dialog.alert('Моля, въведете валиден номер на въпрос.');
      return;
    }
    const questionKey = `question_${qNumber.trim()}`;
    showAnswersForQuestionKey(questionKey, qNumber.trim());
  });
});



function showAnswersForQuestionKey(questionKey, displayNumber) {
  window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function (fs) {
    fs.root.getFile(submitFileName, {}, function (fileEntry) {
      fileEntry.file(function (file) {
        var reader = new FileReader();
        reader.onloadend = function () {
          try {
            const data = JSON.parse(this.result);
            const answers = data.map(sub => `${sub.name}: ${sub[questionKey] || 'Няма отговор'}`);
            const output = answers.join('<br><hr>') || "Няма отговори за този въпрос.";
            app.dialog.alert(output, `Отговори на въпрос ${displayNumber}`);
          } catch (e) {
            app.dialog.alert("Файлът не може да се прочете.");
          }
        };
        reader.readAsText(file);
      });
    });
  }, onError);
}